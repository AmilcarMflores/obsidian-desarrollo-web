- Desde el 2020, Google utiliza **Core Web Vitals** como las m√©tricas principales para medir la **experiencia del usuario** en una p√°gina web.  
- Estas m√©tricas eval√∫an **carga, interactividad y estabilidad visual**:
## Largest Contentful Paint (LCP)
- Qu√© mide: El tiempo que tarda en cargarse el elemento m√°s grande de la p√°gina (imagen, t√≠tulo, bloque de texto).
- Meta recomendada: Menos de 2.5 segundos.

**C√≥mo mejorar:**
- Optimizar im√°genes y recursos pesados.
- Priorizar recursos cr√≠ticos (ej: CSS principal, scripts esenciales).
- Usar carga diferida (_lazy loading_) para elementos no visibles al inicio.
## Cumulative Layout Shift (CLS)
- **Qu√© mide:** La **estabilidad visual**, es decir, cu√°nto se mueven los elementos de la p√°gina mientras carga.
- **Meta recomendada:** Menos de **0.1**.

**C√≥mo mejorar:**
 - Definir **anchos y altos** en im√°genes, iframes y anuncios.
 - Usar **espacios reservados** (placeholders o skeletons).
 - Evitar que nuevos elementos empujen contenido ya cargado.
## First Input Delay (FID)
- **Qu√© mide:** El **tiempo de respuesta** desde que el usuario interact√∫a (clic, toque, tecla) hasta que el navegador responde.
- **Meta recomendada:** Menos de **100 ms**.
- **Problema com√∫n:** JavaScript pesado que bloquea el hilo principal.

**C√≥mo mejorar:**
   - Reducir tareas largas de JS.
   - Dividir c√≥digo en trozos m√°s peque√±os (_code splitting_).
   - Usar **Web Workers** para procesos complejos.
## Interaction to Next Paint (INP) (Reemplazo de FID)
- **Qu√© mide:** El tiempo de respuesta a **todas las interacciones** del usuario durante la vida √∫til de la p√°gina (no solo la primera).
- **Meta recomendada:** Menos de **200 ms**.

 **C√≥mo mejorar:**  
- Optimizar el JavaScript interactivo. 
- Evitar bloqueos en la UI.
- Minimizar el uso excesivo de listeners innecesarios.
## Midiendo el rendimiento con Lighthouse
**Lighthouse** es una herramienta gratuita de Google que genera un informe sobre:
- **Rendimiento** (velocidad, carga)
- **Mejores pr√°cticas**
- **Accesibilidad**
- **SEO**
- **PWA** (aplicaciones web progresivas)

**Se puede usar de varias formas:**
- Desde las **DevTools de Chrome** (pesta√±a ‚ÄúLighthouse‚Äù).
- Con un **comando en la terminal**.
- Desde **PageSpeed Insights** en la web.

**Ejemplo de uso:**
1. Abre tu navegador web y luego la p√°gina web en la que quieres realizar una auditor√≠a.
2. Abre las herramientas de desarrollador de Chrome y selecciona la pesta√±a Lighthouse.
3. En las opciones del panel de Lighthouse, deselecciona todas las categor√≠as excepto Rendimiento.

![[Pasted image 20250831220227.png|reducir-imagen|centrear-imagen]]

4. Haga clic en el bot√≥n Analizar carga de p√°gina. Realizar√° una auditor√≠a en la p√°gina. Una vez que termin√©, ver√°s un informe de la p√°gina.
### Anatom√≠a del informe Lighthouse
Cuando ejecutamos un an√°lisis con **Lighthouse**, el informe se divide en varias partes clave:
#### **Puntuaci√≥n (Score)**
- Es un valor de **0 a 100** que resume el **desempe√±o de la p√°gina** en la categor√≠a evaluada (ej. _Performance_).
- Se calcula a partir de las m√©tricas medidas.
- Se representa con un **indicador circular de color**:
    - üü¢ **90‚Äì100** ‚Üí Bueno
    - üü† **50‚Äì89** ‚Üí Necesita mejora
    - üî¥ **0‚Äì49** ‚Üí Pobre

Una buena puntuaci√≥n no significa perfecci√≥n, sino que la p√°gina cumple con la mayor√≠a de buenas pr√°cticas de rendimiento.
#### **M√©tricas (Metrics)**
Lighthouse utiliza **5 m√©tricas principales**, entre ellas las **Core Web Vitals**.
##### Ya vistas:
- **LCP (Largest Contentful Paint)** ‚Üí Velocidad de carga del elemento m√°s grande.
- **CLS (Cumulative Layout Shift)** ‚Üí Estabilidad visual.
##### Otras m√©tricas:
- **FCP (First Contentful Paint):**
    - Mide el tiempo hasta que aparece **el primer texto o imagen** en pantalla.
    - Refleja la **velocidad de carga percibida**.
- **TBT (Total Blocking Time):**
    - Tiempo desde el **FCP hasta que la p√°gina es interactiva**.
    - Si el contenido aparece pero no responde a clics/teclado, el usuario siente lentitud.
- **Speed Index:**
    - Mide **cu√°nto tarda en mostrarse el contenido visible** comparado con sitios reales.
    - Cuanto m√°s bajo, mejor.

**Cada m√©trica se clasifica en:**
- üü¢ Bueno
- üü† Necesita mejora
- üî¥ Pobre
#### **Diagn√≥sticos (Diagnostics)**
- Profundiza en **problemas espec√≠ficos** y da **oportunidades de mejora**.
- Ejemplos:
    - Im√°genes sin optimizar.
    - Cambios de dise√±o (layout shifts).
    - JavaScript pesado que bloquea la interacci√≥n.
    - Recursos que deber√≠an cargarse de forma diferida (_lazy loading_).

Esta secci√≥n es clave para **priorizar optimizaciones**.
## Mejorando el rendimiento de una p√°gina web
### Controlando la carga de im√°genes
#### **Eager Loading**
- Se utiliza cuando la imagen es **lo primero que el usuario debe ver**.
- Se carga con **prioridad alta** para que aparezca inmediatamente.
#### **Lazy Loading**
- Sintaxis: 
```css
<img src="foto.jpg" loading="lazy" alt="ejemplo"> 
```
Retrasa la carga de im√°genes **fuera de la vista** del usuario.
### Priorizar la carga de recursos
Podemos indicar al navegador **qu√© cargar primero y qu√© preparar despu√©s**:
```html
<link rel="preload" href="estilos.css" as="style">
```
Precarga un recurso **cr√≠tico** para el renderizado inicial (ej: CSS principal, fuente, script).

```html
<link rel="prefetch" href="pagina-siguiente.html">
```
 Descarga recursos que **probablemente usaremos en la pr√≥xima navegaci√≥n**.

```html
<link rel="preconnect" href="https://fonts.googleapis.com">
``` 
Establece una conexi√≥n previa con un servidor para **acelerar futuras peticiones**.

Adem√°s, se puede ajustar la **prioridad de descarga** con:
```html
<img src="hero.jpg" fetchpriority="high" alt="Hero">
```
Valores posibles: `auto | high | low`.

### Optimizaci√≥n de im√°genes
El formato adecuado puede reducir el tama√±o de los archivos hasta un **50‚Äì80%** sin perder calidad.

- Antiguos: `.jpeg`, `.png`
- Modernos: `.webp`, `.avif`, `.jpegxl`

Herramienta recomendada: [Squoosh](https://squoosh.app/?utm_source=chatgpt.com). Permite probar diferentes **formatos y niveles de compresi√≥n**.
